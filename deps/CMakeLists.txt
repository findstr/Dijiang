cmake_minimum_required(VERSION 3.22)
PROJECT(deps)
set(lib_folder "libs")
set(BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)

if(NOT TARGET glm)
    option(BUILD_STATIC_LIBS "" ON)
    option(BUILD_TESTING "" OFF)
    option(GLM_TEST_ENABLE "" OFF)
    add_subdirectory(glm)
    target_compile_options(glm_static PRIVATE -Wdeprecated-volatile)
    set_target_properties(glm_static PROPERTIES FOLDER ${lib_folder})
endif()

if(NOT TARGET glfw)
    option(GLFW_BUILD_EXAMPLES "" OFF)
    option(GLFW_BUILD_TESTS "" OFF)
    option(GLFW_BUILD_DOCS "" OFF)
    option(GLFW_INSTALL "" OFF)
    add_subdirectory(glfw)
    target_compile_options(glfw PRIVATE -Wdeprecated-volatile)
    set_target_properties(glfw PROPERTIES FOLDER ${lib_folder})
    set_target_properties(update_mappings PROPERTIES FOLDER ${lib_folder})
endif()

if (NOT TARGET vk_mem)
	include(vk_mem.cmake)
	set_target_properties(vk_mem PROPERTIES FOLDER ${lib_folder})
endif()
if (NOT TARGET stb)
	include(stb.cmake)
	set_target_properties(stb PROPERTIES FOLDER ${lib_folder})
endif()

if (NOT TARGET spirv-cross)
	add_subdirectory(spirv-cross)
	option(SPIRV_CROSS_STATIC  "" ON)
	set_target_properties(spirv-cross PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-c PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-core PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-cpp PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-reflect PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-hlsl PROPERTIES FOLDER ${lib_folder})
endif()

set(BUILD_SHARED_LIBS ON CACHE BOOL "" FORCE)
if (NOT TARGET lua)
	add_subdirectory(lua)
	set(LUA_ENABLE_SHARED 1)
	set_target_properties(lua PROPERTIES FOLDER ${lib_folder})
endif()


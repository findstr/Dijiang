cmake_minimum_required(VERSION 3.22)
PROJECT(deps)
set(lib_folder "deps")
set(BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)

if (NOT TARGET vk_mem)
	include(vk_mem.cmake)
	set_target_properties(vk_mem PROPERTIES FOLDER ${lib_folder})
endif()
if (NOT TARGET stb)
	include(stb.cmake)
	set_target_properties(stb PROPERTIES FOLDER ${lib_folder})
endif()

if (NOT TARGET spirv-cross)
	add_subdirectory(spirv-cross)
	option(SPIRV_CROSS_STATIC  "" ON)
	set_target_properties(spirv-cross PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-c PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-core PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-cpp PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-reflect PROPERTIES FOLDER ${lib_folder})
	set_target_properties(spirv-cross-hlsl PROPERTIES FOLDER ${lib_folder})
endif()

set(BUILD_SHARED_LIBS ON CACHE BOOL "" FORCE)
if (NOT TARGET lua)
	add_subdirectory(lua)
	set(LUA_ENABLE_SHARED 1)
	set_target_properties(lua PROPERTIES FOLDER ${lib_folder})
endif()

